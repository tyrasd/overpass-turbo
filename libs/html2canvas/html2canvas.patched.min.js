/**
  @license html2canvas v0.34 <http://html2canvas.hertzen.com>
  Copyright (c) 2011 Niklas von Hertzen. All rights reserved.
  http://www.twitter.com/niklasvh

  modified slightly by tyr_asd <tyr.asd@gmail.com>

  Released under MIT License
 */(function(e,t,n){"use strict";function u(t){r.logging&&e.console&&e.console.log&&e.console.log(t)}function a(e){return{zindex:e,children:[]}}function f(e,t){var n=[];return{storage:n,width:e,height:t,fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},drawShape:function(){var e=[];return n.push({type:"function",name:"drawShape",arguments:e}),{moveTo:function(){e.push({name:"moveTo",arguments:arguments})},lineTo:function(){e.push({name:"lineTo",arguments:arguments})},bezierCurveTo:function(){e.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){e.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(e,t){n.push({type:"variable",name:e,arguments:t})}}}var r={},i,s,o;r.Util={},r.Util.backgroundImage=function(e){return/data:image\/.*;base64,/i.test(e)||/^(-webkit|-moz|linear-gradient|-o-)/.test(e)?e:(e.toLowerCase().substr(0,5)==='url("'?(e=e.substr(5),e=e.substr(0,e.length-2)):(e=e.substr(4),e=e.substr(0,e.length-1)),e)},r.Util.Bounds=function(t){var n,r={};if(t.getBoundingClientRect)return n=t.getBoundingClientRect(),r.top=n.top,r.bottom=n.bottom||n.top+n.height,r.left=n.left,r.width=n.width||n.right-n.left,r.height=n.height||n.bottom-n.top,r},r.Util.getCSS=function(r,o){function a(e,t){var n=r.runtimeStyle&&r.runtimeStyle[e],i,s=r.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(t)&&/^-?\d/.test(t)&&(i=s.left,n&&(r.runtimeStyle.left=r.currentStyle.left),s.left=e==="fontSize"?"1em":t||0,t=s.pixelLeft+"px",s.left=i,n&&(r.runtimeStyle.left=n)),/^(thin|medium|thick)$/i.test(t)?t:Math.round(parseFloat(t))+"px"}var u;if(e.getComputedStyle){i!==r&&(s=t.defaultView.getComputedStyle(r,null)),u=s[o];if(o==="backgroundPosition")u=(u.split(",")[0]||"0 0").split(" "),u[0]=u[0].indexOf("%")===-1?a(o+"X",u[0]):u[0],u[1]=u[1]===n?u[0]:u[1],u[1]=u[1].indexOf("%")===-1?a(o+"Y",u[1]):u[1];else if(/border(Top|Bottom)(Left|Right)Radius/.test(o)){var f=u.split(" ");f.length<=1&&(f[1]=f[0]),f[0]=parseInt(f[0],10),f[1]=parseInt(f[1],10),u=f}}else if(r.currentStyle)if(o==="backgroundPosition")u=[a(o+"X",r.currentStyle[o+"X"]),a(o+"Y",r.currentStyle[o+"Y"])];else{u=a(o,r.currentStyle[o]);if(/^(border)/i.test(o)&&/^(medium|thin|thick)$/i.test(u))switch(u){case"thin":u="1px";break;case"medium":u="0px";break;case"thick":u="5px"}}return u},r.Util.BackgroundPosition=function(e,t,n){var i=r.Util.getCSS(e,"backgroundPosition"),s,o,u,a;return i.length===1&&(a=i,i=[],i[0]=a,i[1]=a),i[0].toString().indexOf("%")!==-1?(u=parseFloat(i[0])/100,o=t.width*u-n.width*u):o=parseInt(i[0],10),i[1].toString().indexOf("%")!==-1?(u=parseFloat(i[1])/100,s=t.height*u-n.height*u):s=parseInt(i[1],10),{top:s,left:o}},r.Util.Extend=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},r.Util.Children=function(e){var t;try{t=e.nodeName&&e.nodeName.toUpperCase()==="IFRAME"?e.contentDocument||e.contentWindow.document:function(e){var t=[];return e!==null&&function(e,t){var r=e.length,i=0;if(typeof t.length=="number")for(var s=t.length;i<s;i++)e[r++]=t[i];else while(t[i]!==n)e[r++]=t[i++];return e.length=r,e}(t,e),t}(e.childNodes)}catch(r){u("html2canvas.Util.Children failed with exception: "+r.message),t=[]}return t},function(){r.Generate={};var e=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z-]+)([\w\d\.\s,%\(\)]+)\)$/];r.Generate.parseGradient=function(t,n){var r,i,s=e.length,o,u,a,f,l,c;for(i=0;i<s;i+=1){o=t.match(e[i]);if(o)break}if(o)switch(o[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":r={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},a=o[2].match(/\w+/g);if(a){f=a.length;for(i=0;i<f;i+=1)switch(a[i]){case"top":r.y0=0,r.y1=n.height;break;case"right":r.x0=n.width,r.x1=0;break;case"bottom":r.y0=n.height,r.y1=0;break;case"left":r.x0=0,r.x1=n.width}}r.x0===null&&r.x1===null&&(r.x0=r.x1=n.width/2),r.y0===null&&r.y1===null&&(r.y0=r.y1=n.height/2),a=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(a){f=a.length,l=1/Math.max(f-1,1);for(i=0;i<f;i+=1)c=a[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),c[2]?(u=parseFloat(c[2]),c[3]==="%"?u/=100:u/=n.width):u=i*l,r.colorStops.push({color:c[1],stop:u})}break;case"-webkit-gradient":r={type:o[2]==="radial"?"circle":o[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},a=o[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),a&&(r.x0=a[1]*n.width/100,r.y0=a[2]*n.height/100,r.x1=a[3]*n.width/100,r.y1=a[4]*n.height/100),a=o[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g);if(a){f=a.length;for(i=0;i<f;i+=1)c=a[i].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),u=parseFloat(c[2]),c[1]==="from"&&(u=0),c[1]==="to"&&(u=1),r.colorStops.push({color:c[3],stop:u})}break;case"-moz-linear-gradient":r={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},a=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),a&&(r.x0=a[1]*n.width/100,r.y0=a[2]*n.height/100,r.x1=n.width-r.x0,r.y1=n.height-r.y0),a=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g);if(a){f=a.length,l=1/Math.max(f-1,1);for(i=0;i<f;i+=1)c=a[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),c[2]?(u=parseFloat(c[2]),c[3]&&(u/=100)):u=i*l,r.colorStops.push({color:c[1],stop:u})}break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":r={type:"circle",x0:0,y0:0,x1:n.width,y1:n.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},a=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),a&&(r.cx=a[1]*n.width/100,r.cy=a[2]*n.height/100),a=o[3].match(/\w+/),c=o[4].match(/[a-z-]*/);if(a&&c)switch(c[0]){case"farthest-corner":case"cover":case"":var h=Math.sqrt(Math.pow(r.cx,2)+Math.pow(r.cy,2)),p=Math.sqrt(Math.pow(r.cx,2)+Math.pow(r.y1-r.cy,2)),d=Math.sqrt(Math.pow(r.x1-r.cx,2)+Math.pow(r.y1-r.cy,2)),v=Math.sqrt(Math.pow(r.x1-r.cx,2)+Math.pow(r.cy,2));r.rx=r.ry=Math.max(h,p,d,v);break;case"closest-corner":var h=Math.sqrt(Math.pow(r.cx,2)+Math.pow(r.cy,2)),p=Math.sqrt(Math.pow(r.cx,2)+Math.pow(r.y1-r.cy,2)),d=Math.sqrt(Math.pow(r.x1-r.cx,2)+Math.pow(r.y1-r.cy,2)),v=Math.sqrt(Math.pow(r.x1-r.cx,2)+Math.pow(r.cy,2));r.rx=r.ry=Math.min(h,p,d,v);break;case"farthest-side":a[0]==="circle"?r.rx=r.ry=Math.max(r.cx,r.cy,r.x1-r.cx,r.y1-r.cy):(r.type=a[0],r.rx=Math.max(r.cx,r.x1-r.cx),r.ry=Math.max(r.cy,r.y1-r.cy));break;case"closest-side":case"contain":a[0]==="circle"?r.rx=r.ry=Math.min(r.cx,r.cy,r.x1-r.cx,r.y1-r.cy):(r.type=a[0],r.rx=Math.min(r.cx,r.x1-r.cx),r.ry=Math.min(r.cy,r.y1-r.cy))}a=o[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(a){f=a.length,l=1/Math.max(f-1,1);for(i=0;i<f;i+=1)c=a[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),c[2]?(u=parseFloat(c[2]),c[3]==="%"?u/=100:u/=n.width):u=i*l,r.colorStops.push({color:c[1],stop:u})}}return r},r.Generate.Gradient=function(e,n){var i=t.createElement("canvas"),s=i.getContext("2d"),o,a,f,l,c;i.width=n.width,i.height=n.height,o=r.Generate.parseGradient(e,n),c=new Image;if(o)if(o.type==="linear"){a=s.createLinearGradient(o.x0,o.y0,o.x1,o.y1);for(f=0,l=o.colorStops.length;f<l;f+=1)try{a.addColorStop(o.colorStops[f].stop,o.colorStops[f].color)}catch(h){u(["failed to add color stop: ",h,"; tried to add: ",o.colorStops[f],"; stop: ",f,"; in: ",e])}s.fillStyle=a,s.fillRect(0,0,n.width,n.height),c.src=i.toDataURL()}else if(o.type==="circle"){a=s.createRadialGradient(o.cx,o.cy,0,o.cx,o.cy,o.rx);for(f=0,l=o.colorStops.length;f<l;f+=1)try{a.addColorStop(o.colorStops[f].stop,o.colorStops[f].color)}catch(h){u(["failed to add color stop: ",h,"; tried to add: ",o.colorStops[f],"; stop: ",f,"; in: ",e])}s.fillStyle=a,s.fillRect(0,0,n.width,n.height),c.src=i.toDataURL()}else if(o.type==="ellipse"){var p=t.createElement("canvas"),d=p.getContext("2d"),v=Math.max(o.rx,o.ry),m=v*2,g;p.width=p.height=m,a=d.createRadialGradient(o.rx,o.ry,0,o.rx,o.ry,v);for(f=0,l=o.colorStops.length;f<l;f+=1)try{a.addColorStop(o.colorStops[f].stop,o.colorStops[f].color)}catch(h){u(["failed to add color stop: ",h,"; tried to add: ",o.colorStops[f],"; stop: ",f,"; in: ",e])}d.fillStyle=a,d.fillRect(0,0,m,m),s.fillStyle=o.colorStops[f-1].color,s.fillRect(0,0,i.width,i.height),g=new Image,g.onload=function(){s.drawImage(g,o.cx-o.rx,o.cy-o.ry,2*o.rx,2*o.ry),c.src=i.toDataURL()},g.src=p.toDataURL()}return c},r.Generate.ListAlpha=function(e){var t="",n;do n=e%26,t=String.fromCharCode(n+64)+t,e/=26;while(e*26>26);return t},r.Generate.ListRoman=function(e){var t=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],n=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],r="",i,s=t.length;if(e<=0||e>=4e3)return e;for(i=0;i<s;i+=1)while(e>=n[i])e-=n[i],r+=t[i];return r}}(),r.Parse=function(i,s){function k(){return{width:Math.max(Math.max(d.body.scrollWidth,d.documentElement.scrollWidth),Math.max(d.body.offsetWidth,d.documentElement.offsetWidth),Math.max(d.body.clientWidth,d.documentElement.clientWidth)),height:Math.max(Math.max(d.body.scrollHeight,d.documentElement.scrollHeight),Math.max(d.body.offsetHeight,d.documentElement.offsetHeight),Math.max(d.body.clientHeight,d.documentElement.clientHeight))}}function A(e,t){var n=parseInt(L(e,t),10);return isNaN(n)?0:n}function O(e,t,n,r,i,s){s!=="transparent"&&(e.setVariable("fillStyle",s),e.fillRect(t,n,r,i),h+=1)}function M(e,t){switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(e,t,n){if(e.length>0)return t+n.toUpperCase()});case"uppercase":return e.toUpperCase();default:return e}}function _(e){return e.replace(/^\s*/g,"").replace(/\s*$/g,"")}function D(e,t){if(p[e+"-"+t]!==n)return p[e+"-"+t];var r=d.createElement("div"),i=d.createElement("img"),s=d.createElement("span"),o,u,a;return r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin=0,r.style.padding=0,m.appendChild(r),i.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",i.width=1,i.height=1,i.style.margin=0,i.style.padding=0,i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin=0,s.style.padding=0,s.appendChild(d.createTextNode("Hidden Text")),r.appendChild(s),r.appendChild(i),o=i.offsetTop-s.offsetTop+1,r.removeChild(s),r.appendChild(d.createTextNode("Hidden Text")),r.style.lineHeight="normal",i.style.verticalAlign="super",u=i.offsetTop-r.offsetTop+1,a={baseline:o,lineWidth:1,middle:u},p[e+"-"+t]=a,m.removeChild(r),a}function P(e,t,n,r){_(e).length>0&&(r.fillText(e,t,n),h+=1)}function H(e,t,n){var i=n.ctx,u=L(e,"fontFamily"),a=L(e,"fontSize"),f=L(e,"color"),l=L(e,"textDecoration"),c=L(e,"textAlign"),h=L(e,"letterSpacing"),p,v,g,y,b,w=L(e,"fontWeight"),E=L(e,"fontStyle"),S=L(e,"fontVariant"),x=!1,N,C,k=0,A,H,B,j,F,I;t.nodeValue=M(t.nodeValue,L(e,"textTransform")),v=_(t.nodeValue);if(v.length>0){l!=="none"&&(g=D(u,a)),c=c.replace(["-webkit-auto"],["auto"]),s.letterRendering===!1&&/^(left|right|justify|auto)$/.test(c)&&/^(normal|none|0px)$/.test(h)?y=t.nodeValue.split(/(\b| )/):y=t.nodeValue.split("");switch(parseInt(w,10)){case 401:w="bold";break;case 400:w="normal"}i.setVariable("fillStyle",f),i.setVariable("font",E+" "+S+" "+w+" "+a+" "+u),x?i.setVariable("textAlign","right"):i.setVariable("textAlign","left"),A=t;for(H=0,b=y.length;H<b;H+=1){C=null;if(o.rangeBounds){if(l!=="none"||_(y[H]).length!==0)C=y[H],d.createRange?(B=d.createRange(),B.setStart(t,k),B.setEnd(t,k+C.length)):B=m.createTextRange(),B.getBoundingClientRect()?p=B.getBoundingClientRect():p={}}else{if(typeof A.nodeValue!="string")continue;T<b-1?N=A.splitText(y[H].length):N=null,j=A.parentNode,F=d.createElement("wrapper"),I=A.cloneNode(!0),F.appendChild(A.cloneNode(!0)),j.replaceChild(F,A),p=r.Util.Bounds(F),C=A.nodeValue,A=N,j.replaceChild(I,F)}C!==null&&P(C,p.left,p.bottom,i);switch(l){case"underline":O(i,p.left,Math.round(p.top+g.baseline+g.lineWidth),p.width,1,f);break;case"overline":O(i,p.left,p.top,p.width,1,f);break;case"line-through":O(i,p.left,Math.ceil(p.top+g.middle+g.lineWidth),p.width,1,f)}k+=y[H].length}}}function B(e,t){var n=d.createElement("boundelement"),i,s;return n.style.display="inline",i=e.style.listStyleType,e.style.listStyleType="none",n.appendChild(d.createTextNode(t)),e.insertBefore(n,e.firstChild),s=r.Util.Bounds(n),e.removeChild(n),e.style.listStyleType=i,s}function j(e){var t=-1,n=1,r=e.parentNode.childNodes;if(e.parentNode){while(r[++t]!==e)r[t].nodeType===1&&n++;return n}return-1}function F(e,t,n){var i=L(e,"listStylePosition"),s,o,u=L(e,"listStyleType"),a,f,l,c=L(e,"fontWeight");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(u)){a=j(e);switch(u){case"decimal":f=a;break;case"decimal-leading-zero":a.toString().length===1?f=a="0"+a.toString():f=a.toString();break;case"upper-roman":f=r.Generate.ListRoman(a);break;case"lower-roman":f=r.Generate.ListRoman(a).toLowerCase();break;case"lower-alpha":f=r.Generate.ListAlpha(a).toLowerCase();break;case"upper-alpha":f=r.Generate.ListAlpha(a)}f+=". ",l=B(e,f);switch(c){case 401:c="bold";break;case 400:c="normal"}S.setVariable("fillStyle",L(e,"color")),S.setVariable("font",L(e,"fontVariant")+" "+c+" "+L(e,"fontStyle")+" "+L(e,"fontSize")+" "+L(e,"fontFamily"));if(i!=="inside")return;S.setVariable("textAlign","left"),s=n.left,o=l.bottom,P(f,s,o,S)}}function I(e){var t=i[e];return t&&t.succeeded===!0?t.img:!1}function q(e,t){var n=Math.max(e.left,t.left),r=Math.max(e.top,t.top),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height);return{left:n,top:r,width:i-n,height:s-r}}function R(e,t){var n;return t?e!=="auto"?(c=!0,n=a(e),t.children.push(n),n):t:(n=a(0),n)}function U(e,t,n,r){var i=n.left,s=n.top,o=n.width,u=n.height,a,f,l,c,p,d,v,m,g,y=function(e){var t=[],n=["Top","Right","Bottom","Left"],r;for(r=0;r<4;r+=1)t.push({width:A(e,"border"+n[r]+"Width"),color:L(e,"border"+n[r]+"Color")});return t}(e),b=function(e){var t=[],n=["TopLeft","TopRight","BottomRight","BottomLeft"],r;for(r=0;r<4;r+=1)t.push(L(e,"border"+n[r]+"Radius"));return t}(e);for(a=0;a<4;a+=1){f=y[a],m=[];if(f.width>0){l=i,c=s,p=o,d=u-y[2].width;switch(a){case 0:d=y[0].width,v=0,m[v++]=["line",l,c],m[v++]=["line",l+p,c],m[v++]=["line",l+p-y[1].width,c+d],m[v++]=["line",l+y[3].width,c+d];break;case 1:l=i+o-y[1].width,p=y[1].width,v=0,m[v++]=["line",l,c+y[0].width],m[v++]=["line",l+p,c],m[v++]=["line",l+p,c+d+y[2].width],m[v++]=["line",l,c+d];break;case 2:c=c+u-y[2].width,d=y[2].width,v=0,m[v++]=["line",l+y[3].width,c],m[v++]=["line",l+p-y[2].width,c],m[v++]=["line",l+p,c+d],m[v++]=["line",l,c+d];break;case 3:p=y[3].width,v=0,m[v++]=["line",l,c],m[v++]=["line",l+p,c+y[0].width],m[v++]=["line",l+p,c+d],m[v++]=["line",l,c+d+y[2].width]}g={left:l,top:c,width:p,height:d},r&&(g=q(g,r));if(g.width>0&&g.height>0&&f.color!=="transparent"){t.setVariable("fillStyle",f.color);var w=t.drawShape(),E=m.length;for(v=0;v<E;v++)w[v===0?"moveTo":m[v][0]+"To"].apply(null,m[v].slice(1));h+=1}}}return y}function z(e,t,n){var r=d.createElement("valuewrap"),i=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"],s,o,a,f,l;for(s=0,f=i.length;s<f;s+=1){l=i[s];try{r.style[l]=L(e,l)}catch(c){u("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}}r.style.borderColor="black",r.style.borderStyle="solid",r.style.display="block",r.style.position="absolute";if(/^(submit|reset|button|text|password)$/.test(e.type)||e.nodeName==="SELECT")r.style.lineHeight=L(e,"height");r.style.top=t.top+"px",r.style.left=t.left+"px",e.nodeName==="SELECT"?o=e.options[e.selectedIndex].text:o=e.value,a=d.createTextNode(o),r.appendChild(a),m.appendChild(r),H(e,a,n),m.removeChild(r)}function W(e,t,n,r,i,s,o,u,a,f){e.drawImage(t,n,r,i,s,o,u,a,f),h+=1}function X(e,t,n,r,i,s,o,u){var a=0,f=0;o-n>0&&(a=o-n),u-r>0&&(f=u-r),W(e,t,a,f,i-a,s-f,n+a,r+f,i-a,s-f)}function V(e,t,n,r,i,s,o){var u,a=Math.min(t.width,s),f;n.top=n.top-Math.ceil(n.top/t.height)*t.height;for(f=i+n.top;f<o+i;)Math.floor(f+t.height)>o+i?u=o+i-f:u=t.height,X(e,t,r+n.left,f,a,u,r,i),f=Math.floor(f+t.height)}function $(e,t,n,r,i,s,o){var u=Math.min(t.height,o),a,f;n.left=n.left-Math.ceil(n.left/t.width)*t.width;for(f=r+n.left;f<s+r;)Math.floor(f+t.width)>s+r?a=s+r-f:a=t.width,X(e,t,f,i+n.top,a,u,r,i),f=Math.floor(f+t.width)}function J(e,t,n){var i=L(e,"backgroundImage"),s=L(e,"backgroundRepeat").split(",")[0],o,a,f,l,c,h,p,d,v,m,g,y;!/data:image\/.*;base64,/i.test(i)&&!/^(-webkit|-moz|linear-gradient|-o-)/.test(i)&&(i=i.split(",")[0]);if(typeof i!="undefined"&&/^(1|none)$/.test(i)===!1){i=r.Util.backgroundImage(i),o=I(i),a=r.Util.BackgroundPosition(e,t,o);if(o)switch(s){case"repeat-x":$(n,o,a,t.left,t.top,t.width,t.height);break;case"repeat-y":V(n,o,a,t.left,t.top,t.width,t.height);break;case"no-repeat":l=t.width-a.left,v=t.height-a.top,c=a.left,h=a.top,p=a.left+t.left,d=a.top+t.top,c<0?(c=Math.abs(c),p+=c,l=Math.min(t.width,o.width-c)):(l=Math.min(l,o.width),c=0),h<0?(h=Math.abs(h),d+=h,v=Math.min(t.height,o.height-h)):(v=Math.min(v,o.height),h=0),v>0&&l>0&&W(n,o,c,h,l,v,p,d,l,v);break;default:a.top=a.top-Math.ceil(a.top/o.height)*o.height;for(f=t.top+a.top;f<t.height+t.top;)m=Math.min(o.height,t.height+t.top-f),Math.floor(f+o.height)>m+f?g=m+f-f:g=o.height,f<t.top?(y=t.top-f,f=t.top):y=0,$(n,o,a,t.left,f,t.width,g),y>0&&(a.top+=y),f=Math.floor(f+o.height)-y}else u("html2canvas: Error loading background:"+i)}}function K(e,t){var n=r.Util.Bounds(e),i=n.left,o=n.top,a=n.width,l=n.height,c,h=L(e,"backgroundColor"),p=L(e,"position"),d,m=L(e,"opacity"),g,y,b,w,E,S,T,N,C,M;t?x={}:(x=k(),t={opacity:1}),d=R(L(e,"zIndex"),t.zIndex),g={ctx:f(x.width||a,x.height||l),zIndex:d,opacity:m*t.opacity,cssPosition:p},t.clip&&(g.clip=r.Util.Extend({},t.clip)),s.useOverflow===!0&&/(hidden|scroll|auto)/.test(L(e,"overflow"))===!0&&/(BODY)/i.test(e.nodeName)===!1&&(g.clip?g.clip=q(g.clip,n):g.clip=n),y=d.children.push(g),w=d.children[y-1].ctx,w.setVariable("globalAlpha",g.opacity),b=U(e,w,n,!1),g.borders=b,v.test(e.nodeName)&&s.iframeDefault!=="transparent"&&(s.iframeDefault==="default"?h="#efefef":h=s.iframeDefault),E={left:i+b[3].width,top:o+b[0].width,width:a-(b[1].width+b[3].width),height:l-(b[0].width+b[2].width)},g.clip&&(E=q(E,g.clip)),E.height>0&&E.width>0&&(O(w,E.left,E.top,E.width,E.height,h),J(e,E,w));switch(e.nodeName){case"IMG":S=e.getAttribute("src"),c=I(S),c?(T=A(e,"paddingLeft"),N=A(e,"paddingTop"),C=A(e,"paddingRight"),M=A(e,"paddingBottom"),W(w,c,0,0,c.width,c.height,i+T+b[3].width,o+N+b[0].width,n.width-(b[1].width+b[3].width+T+C),n.height-(b[0].width+b[2].width+N+M))):u("html2canvas: Error loading <img>:"+S);break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(e.type)&&e.value.length>0&&z(e,n,g);break;case"TEXTAREA":e.value.length>0&&z(e,n,g);break;case"SELECT":e.options.length>0&&z(e,n,g);break;case"LI":F(e,g,E);break;case"CANVAS":T=A(e,"paddingLeft"),N=A(e,"paddingTop"),C=A(e,"paddingRight"),M=A(e,"paddingBottom"),W(w,e,0,0,e.width,e.height,i+T+b[3].width,o+N+b[0].width,n.width-(b[1].width+b[3].width+T+C),n.height-(b[0].width+b[2].width+N+M))}return d.children[y-1]}function Q(e,t){if(L(e,"display")!=="none"&&L(e,"visibility")!=="hidden"){t=K(e,t)||t,S=t.ctx;if(!v.test(e.nodeName)){var n=r.Util.Children(e),i,s,o;for(i=0,o=n.length;i<o;i+=1)s=n[i],s.nodeType===1?Q(s,t):s.nodeType===3&&H(e,s,t)}}}e.scroll(0,0);var o={rangeBounds:!1,svgRendering:s.svgRendering&&function(){var e=new Image,r=t.createElement("canvas"),i=r.getContext===n?!1:r.getContext("2d");if(i===!1)return!1;r.width=r.height=10,e.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{i.drawImage(e,0,0),r.toDataURL()}catch(s){return!1}return u("html2canvas: Parse: SVG powered rendering available"),!0}()},l=s.elements===n?t.body:s.elements[0],c=!1,h=0,p={},d=l.ownerDocument,v=new RegExp("("+s.ignoreElements+")"),m=d.body,g,y,b,w,E,S,x,T,N,C;i=i||{},d.createRange&&(g=d.createRange(),g.getBoundingClientRect&&(y=d.createElement("boundtest"),y.style.height="123px",y.style.display="block",m.appendChild(y),g.selectNode(y),b=g.getBoundingClientRect(),w=b.height,w===123&&(o.rangeBounds=!0),m.removeChild(y)));var L=r.Util.getCSS;E=K(l,null),o.svgRendering&&function(e){function s(e){var t=r.Util.Children(e),n=t.length,o,u,a,f,l;for(l=0;l<n;l+=1){f=t[l];if(f.nodeType===3)i+=f.nodeValue.replace(/\</g,"&lt;").replace(/\>/g,"&gt;");else if(f.nodeType===1&&!/^(script|meta|title)$/.test(f.nodeName.toLowerCase())){i+="<"+f.nodeName.toLowerCase();if(f.hasAttributes()){o=f.attributes,a=o.length;for(u=0;u<a;u+=1)i+=" "+o[u].name+'="'+o[u].value+'"'}i+=">",s(f),i+="</"+f.nodeName.toLowerCase()+">"}}}var t=new Image,n=k(),i="";s(e),t.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+n.width+"' height='"+n.height+"'>","<foreignObject width='"+n.width+"' height='"+n.height+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",i.replace(/\#/g,"%23"),"</html>","</foreignObject>","</svg>"].join(""),t.onload=function(){E.svgRender=t}}(t.documentElement);for(T=0,N=l.children,C=N.length;T<C;T+=1)Q(N[T],E);return E.backgroundColor=L(t.documentElement,"backgroundColor"),E},r.Preload=function(i){function y(e){v.href=e,v.href=v.href;var t=v.protocol+v.host;return t===o}function b(){u("html2canvas: start: images: "+s.numLoaded+" / "+s.numTotal+" (failed: "+s.numFailed+")"),!s.firstRun&&s.numLoaded>=s.numTotal&&(u("Finished loading images: # "+s.numTotal+" (failed: "+s.numFailed+")"),typeof i.complete=="function"&&i.complete(s))}function w(t,r,o){var u,a=i.proxy,f;v.href=t,t=v.href,u="html2canvas_"+l++,o.callbackname=u,a.indexOf("?")>-1?a+="&":a+="?",a+="url="+encodeURIComponent(t)+"&callback="+u,f=h.createElement("script"),e[u]=function(t){t.substring(0,6)==="error:"?(o.succeeded=!1,s.numLoaded++,s.numFailed++,b()):(S(r,o),r.src=t),e[u]=n;try{delete e[u]}catch(i){}f.parentNode.removeChild(f),f=null,delete o.script,delete o.callbackname},f.setAttribute("type","text/javascript"),f.setAttribute("src",a),o.script=f,e.document.body.appendChild(f)}function E(e){var t=r.Util.Children(e),i,o,f,l,c=!1;try{var h=t.length;for(i=0;i<h;i+=1)E(t[i])}catch(p){}try{c=e.nodeType}catch(d){c=!1,u("html2canvas: failed to access some element's nodeType - Exception: "+d.message)}if(c===1||c===n){try{o=r.Util.getCSS(e,"backgroundImage")}catch(p){u("html2canvas: failed to get background-image - Exception: "+p.message)}o&&o!=="1"&&o!=="none"&&(/^(-webkit|-o|-moz|-ms|linear)-/.test(o)?(l=r.Generate.Gradient(o,r.Util.Bounds(e)),l!==n&&(s[o]={img:l,succeeded:!0},s.numTotal++,s.numLoaded++,b())):(f=r.Util.backgroundImage(o.match(/data:image\/.*;base64,/i)?o:o.split(",")[0]),a.loadImage(f)))}}function S(t,r){t.onload=function(){r.timer!==n&&e.clearTimeout(r.timer),s.numLoaded++,r.succeeded=!0,t.onerror=t.onload=null,b()},t.onerror=function(){if(t.crossOrigin==="anonymous"){e.clearTimeout(r.timer);if(i.proxy){var n=t.src;t=new Image,r.img=t,t.src=n,w(t.src,t,r);return}}s.numLoaded++,s.numFailed++,r.succeeded=!1,t.onerror=t.onload=null,b()}}var s={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},o,a,f,l=0,c=i.elements[0]||t.body,h=c.ownerDocument,p=h.images,d=p.length,v=h.createElement("a"),m=function(e){return e.crossOrigin!==n}(new Image),g;v.href=e.location.href,o=v.protocol+v.host,a={loadImage:function(e){var t,r;e&&s[e]===n&&(t=new Image,e.match(/data:image\/.*;base64,/i)?(t.src=e.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,""),r=s[e]={img:t},s.numTotal++,S(t,r)):y(e)||i.allowTaint===!0?(r=s[e]={img:t},s.numTotal++,S(t,r),t.src=e):m&&!i.allowTaint&&i.useCORS?(t.crossOrigin="anonymous",r=s[e]={img:t},s.numTotal++,S(t,r),t.src=e+"?"):i.proxy&&(r=s[e]={img:t},s.numTotal++,w(e,t,r)))},cleanupDOM:function(r){var o,a;if(!s.cleanupDone){r&&typeof r=="string"?u("html2canvas: Cleanup because: "+r):u("html2canvas: Cleanup after timeout: "+i.timeout+" ms.");for(a in s)if(s.hasOwnProperty(a)){o=s[a];if(typeof o=="object"&&o.callbackname&&o.succeeded===n){e[o.callbackname]=n;try{delete e[o.callbackname]}catch(f){}o.script&&o.script.parentNode&&(o.script.setAttribute("src","about:blank"),o.script.parentNode.removeChild(o.script)),s.numLoaded++,s.numFailed++,u("html2canvas: Cleaned up failed img: '"+a+"' Steps: "+s.numLoaded+" / "+s.numTotal)}}e.stop!==n?e.stop():t.execCommand!==n&&t.execCommand("Stop",!1),t.close!==n&&t.close(),s.cleanupDone=!0,(!r||typeof r!="string")&&b()}},renderingDone:function(){g&&e.clearTimeout(g)}},i.timeout>0&&(g=e.setTimeout(a.cleanupDOM,i.timeout)),u("html2canvas: Preload starts: finding background-images"),s.firstRun=!0,E(c),u("html2canvas: Preload: Finding images");for(f=0;f<d;f+=1)a.loadImage(p[f].getAttribute("src"));return s.firstRun=!1,u("html2canvas: Preload: Done."),s.numTotal===s.numLoaded&&b(),a},r.Renderer=function(e,n){function s(e){var t=[],n=[],r=e.children,o,u,a,f,l,c,h,p;for(o=0,l=r.length;o<l;o+=1)c=r[o],c.children&&c.children.length>0?(t.push(c),n.push(c.zindex)):i.push(c);n.sort(function(e,t){return e-t});for(u=0,a=n.length;u<a;u+=1){f=n[u];for(h=0,p=t.length;h<=p;h+=1)if(t[h].zindex===f){c=t.splice(h,1),s(c[0]);break}}}var i=[];s(e.zIndex);if(typeof n._renderer._create!="function")throw new Error("Invalid renderer defined");return n._renderer._create(e,n,t,i,r)},o=function(t,i){var s,o,a={logging:!1,elements:t,proxy:"http://html2canvas.appspot.com/",timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,iframeDefault:"default",ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,flashcanvas:n,width:null,height:null,taintTest:!0,renderer:"Canvas"},f;a=r.Util.Extend(i,a);if(typeof a.renderer=="string"&&r.Renderer[a.renderer]!==n)a._renderer=r.Renderer[a.renderer](a);else{if(typeof a.renderer!="function")throw"Unknown renderer";a._renderer=a.renderer(a)}return r.logging=a.logging,a.complete=function(e){if(typeof a.onpreloaded=="function"&&a.onpreloaded(e)===!1)return;s=r.Parse(e,a);if(typeof a.onparsed=="function"&&a.onparsed(s)===!1)return;o=r.Renderer(s,a),typeof a.onrendered=="function"&&a.onrendered(o)},e.setTimeout(function(){r.Preload(a)},0),{render:function(e,t){return r.Renderer(e,r.Util.Extend(t,a))},parse:function(e,t){return r.Parse(e,r.Util.Extend(t,a))},preload:function(e){return r.Preload(r.Util.Extend(e,a))},log:u}},o.log=u,o.Renderer={Canvas:n},r.Renderer.Canvas=function(r){r=r||{};var i=t,s=r.canvas||i.createElement("canvas"),o=!1,a=!1,f=!1,l,c=2880;if(s.getContext)u("html2canvas: Renderer: using canvas renderer"),f=!0;else if(r.flashcanvas!==n){o=!0,u("html2canvas: Renderer: canvas not available, using flashcanvas");var h=i.createElement("script");h.src=r.flashcanvas,h.onload=function(t,r){var i;if(t.onload!==n)return r;t.onreadystatechange!==n?(i=function(){t.readyState!=="loaded"&&t.readyState!=="complete"?e.setTimeout(i,250):r()},e.setTimeout(i,250)):u("html2canvas: Renderer: Can't track when flashcanvas is loaded")}(h,function(){typeof e.FlashCanvas!="undefined"&&(u("html2canvas: Renderer: Flashcanvas initialized"),e.FlashCanvas.initElement(s),f=!0,a!==!1&&l._create.apply(null,a))}),i.body.appendChild(h)}return l={_create:function(e,r,i,l,h){if(!f)return a=arguments,s;var p=s.getContext("2d"),d,v,m,g,y,b,w=t.createElement("canvas"),E=w.getContext!==n,S,x,T=E?w.getContext("2d"):{},N=[],C;s.width=s.style.width=o?Math.min(c,r.width||e.ctx.width):r.width||e.ctx.width,s.height=s.style.height=o?Math.min(c,r.height||e.ctx.height):r.height||e.ctx.height,C=p.fillStyle,p.fillStyle=e.backgroundColor,p.fillRect(0,0,s.width,s.height),p.fillStyle=C;if(r.svgRendering&&e.svgRender!==n)p.drawImage(e.svgRender,0,0);else for(v=0,m=l.length;v<m;v+=1){d=l.splice(0,1)[0],d.canvasPosition=d.canvasPosition||{},p.textBaseline="bottom",d.clip&&(p.save(),p.beginPath(),p.rect(d.clip.left,d.clip.top,d.clip.width,d.clip.height),p.clip());if(d.ctx.storage)for(g=0,S=d.ctx.storage.length;g<S;g+=1){x=d.ctx.storage[g];switch(x.type){case"variable":p[x.name]=x.arguments;break;case"function":if(x.name==="fillRect")(!o||x.arguments[0]+x.arguments[2]<c&&x.arguments[1]+x.arguments[3]<c)&&p.fillRect.apply(p,x.arguments);else if(x.name==="drawShape")(function(e){var t,n=e.length;p.beginPath();for(t=0;t<n;t++)p[e[t].name].apply(p,e[t].arguments);p.closePath(),p.fill()})(x.arguments);else if(x.name==="fillText")(!o||x.arguments[1]<c&&x.arguments[2]<c)&&p.fillText.apply(p,x.arguments);else if(x.name==="drawImage"&&x.arguments[8]>0&&x.arguments[7]){if(E&&r.taintTest&&N.indexOf(x.arguments[0].src)===-1){T.drawImage(x.arguments[0],0,0);try{T.getImageData(0,0,1,1)}catch(k){w=i.createElement("canvas"),T=w.getContext("2d");continue}N.push(x.arguments[0].src)}p.drawImage.apply(p,x.arguments)}break;default:}}d.clip&&p.restore()}return u("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),m=r.elements.length,m===1&&typeof r.elements[0]=="object"&&r.elements[0].nodeName!=="BODY"&&o===!1?(b=h.Util.Bounds(r.elements[0]),y=i.createElement("canvas"),y.width=b.width,y.height=b.height,p=y.getContext("2d"),p.drawImage(s,b.left,b.top,b.width,b.height,0,0,b.width,b.height),s=null,y):s}},l},e.html2canvas=o})(window,document);